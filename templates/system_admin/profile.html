<!DOCTYPE html>
<html lang="en">

<head>
    {% load staticfiles %}
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="{% static 'theme/images/favicon.ico' %}" type="image/icon">
    <title>RapidSignNow</title>

    <!--Core CSS -->
    {% block theme_styles %}
    <link href="{% static 'theme/bs3/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'theme/css/bootstrap-reset.css' %}" rel="stylesheet">
    <link href="{% static 'theme/font-awesome/css/font-awesome.css' %}" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link href="{% static 'theme/css/style.css' %}" rel="stylesheet">
    <link href="{% static 'theme/css/style-responsive.css' %}" rel="stylesheet" /> {% endblock theme_styles %}
    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]>
    <script src="{% static 'theme/js/ie8-responsive-file-warning.js' %}"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles here -->
    <link rel="stylesheet" href="{% static 'common/css/sweetalert2.min.css' %}">
    <link rel="stylesheet" href="{% static 'common/css/style.css' %}"> {% block other_styles %} {% endblock other_styles %}
</head>

<body>

    {% if ENVIRONMENT == "staging" %}
    <div class="panel panel-danger"></div>
    <section class="text-danger"style="color: #a94442;background-color: #f2dede;border-color: #ebccd1;height: 30px;position: fixed;text-align: center;padding: 2px;font-size: 16px;top: 0;left: 0; z-index: 10000;width: 100%;">
        Please Note: This is a Staging environment. Any changes made here won't affect the production environment
        <span style="float:right; margin-right:30px;"><button class="close-staging-banner" style="background-color:transparent ;color:#ffffff; margin-bottom:3px;border: 0px;"><i class="fa fa-times-circle"></i></button></span>
    </section>
    </div>
    <section id="container" style="top:30px;position: relative;">
            <header class="header fixed-top clearfix" style="top:30px">
    {% else %}
<section id="container">
    
    <!--header start-->
    <header class="header fixed-top clearfix">
        
        {% endif %}
        
            <!--logo start-->
            <div class="brand">

                <a class="logo">
        Admin
    </a>
                <div class="sidebar-toggle-box">
                    <div class="fa fa-bars"></div>
                </div>
            </div>
            <!--logo end-->

            <div class="top-nav clearfix">
                <div class="pull-left">
                    <!-- <button type="button" class="btn btn-primary" id="navigation-button"></button> -->
                </div>
                <!--search & user info start-->
                <ul class="nav pull-right top-menu">
                    <!-- user login dropdown start-->
                    <li class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle icon-user" href="#">
                            <!--<img alt="" src="images/avatar1_small.jpg">-->
                            <i class="fa fa-user"></i>
                            <span class="username">{{ request.user.first_name }} {{ request.user.last_name }}</span>
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu extended logout">
                            <li><a href="/"><i class="fa fa-key"></i> Log Out</a></li>
                        </ul>
                    </li>
                    <!-- user login dropdown end -->
                </ul>
                <!--search & user info end-->
            </div>
        </header>
        <!--header end-->
        <aside>
                            {% block sidebar %}

            <div id="sidebar" class="nav-collapse">
                <div class="leftside-navigation">
                    <ul class="sidebar-menu" id="nav-accordion">
                        <li>
                            <a data-nav-item="profile" href="/administrator/profile/">
                                <span>Profile</span>
                            </a>
                        </li>
                        <li>
                                <a data-nav-item="dashboard" href="/administrator/dashboard/">
                                    <span>Dashboard</span>
                                </a>
                            </li>
                        
                        <li>
                            <a data-nav-item="law-firms" href="/administrator/law-firms/">
                        <span>Law Firms</span>
                    </a>
                        </li>
                        <li>
                            <a data-nav-item="brokers" href="/administrator/brokers/">
                        <span>Brokers</span>
                    </a>
                        </li>
                        <li>
                            <a data-nav-item="investigators" href="/administrator/master-brokers/">
                        <span>Master Brokers</span>
                    </a>
                        </li>
                        <li>
                            <a data-nav-item="investigators" href="/administrator/investigators/">
                        <span>Investigators</span>
                    </a>
                        </li>
                        <li>
                            <a data-nav-item="generate-invoice" href="/administrator/generate-invoice/">
                        <span>Generate Invoice</span>
                    </a>
                        </li>
                        <li>
                            <a data-nav-item="generate-report" href="/administrator/generate-report/">
                        <span>Generate Payment Reports</span>
                    </a>
                        </li>
                        <li>
                            <a data-nav-item="rates" href="/administrator/rates/">
                        <span>Rates</span>
                    </a>
                        </li>
                    </ul>
                </div>
            </div>

            {% endblock sidebar %}
        </aside>
        <!--sidebar end-->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper">

                {% block content %}
                <div class="col-lg-12">
                    <section class="panel">
                        <header class="panel-heading">
                            Change Password
                        </header>
                        <div class="panel-body">
                            <div class="position-center">
                                <form class="form-horizontal" role="form">
                                    <div class="form-group">
                                        <label for="oldPassword" class="col-lg-3 col-sm-3 control-label">Old Password</label>
                                        <div class="col-lg-9">
                                            <input type="password" class="form-control" id="oldPassword" name="old_password" placeholder="Old Password">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="newPassword" class="col-lg-3 col-sm-3 control-label">New Password</label>
                                        <div class="col-lg-9">
                                            <input type="password" class="form-control" id="newPassword" name="new_password" placeholder="New Password">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="newPasswordConfirm" class="col-lg-3 col-sm-3 control-label">New Password (Again)</label>
                                        <div class="col-lg-9">
                                            <input type="password" class="form-control" id="newPasswordConfirm" name="new_password_confirm" placeholder="New Password (Again)">
                                        </div>
                                    </div>

                                    {% csrf_token %}

                                    <div class="form-group">
                                        <div class="col-lg-offset-3 col-lg-10">
                                            <button type="submit" id="changePasswordBtn" class="btn btn-danger">Change Password</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </section>

                </div>

                {% endblock content %}
                <!-- page end-->
            </section>
        </section>
        <!--main content end-->
        <!--right sidebar start-->
        <div class="right-sidebar">
        </div>
        <!--right sidebar end-->

    </section>


    <!--Core js-->
    {% block theme_scripts %}
    <script src="{% static 'theme/js/jquery.js' %}"></script>
    <script src="{% static 'theme/bs3/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'theme/js/jquery.dcjqaccordion.2.7.js' %}" class="include"></script>
    <script src="{% static 'theme/js/jquery.scrollTo.min.js' %}"></script>
    <script src="{% static 'theme/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.js' %}"></script>
    <script src="{% static 'theme/js/jquery.nicescroll.js' %}"></script>
    <!--Easy Pie Chart-->
    <script src="{% static 'theme/js/easypiechart/jquery.easypiechart.js' %}"></script>
    <!--Sparkline Chart-->
    <script src="{% static 'theme/js/sparkline/jquery.sparkline.js' %}"></script>
    <!--jQuery Flot Chart-->
    <script src="{% static 'theme/js/flot-chart/jquery.flot.js' %}"></script>
    <script src="{% static 'theme/js/flot-chart/jquery.flot.tooltip.min.js' %}"></script>
    <script src="{% static 'theme/js/flot-chart/jquery.flot.resize.js' %}"></script>
    <script src="{% static 'theme/js/flot-chart/jquery.flot.pie.resize.js' %}"></script>

    <!--common script init for all pages-->
    <script src="{% static 'theme/js/scripts.js' %}"></script>
    {% endblock theme_scripts %}

    <script src="{% static 'common/js/sweetalert2.min.js' %}"></script>
    <script src="{% static 'common/js/script.js' %}"></script>


    {% block other_scripts %}

    <script type="text/javascript">
$('a[data-nav-item=profile]').addClass('active');
        $('#changePasswordBtn').click(function () {
            'use strict';


            if ($('#newPassword').val() !== $('#newPasswordConfirm').val()) {
                swal({
                    title: 'Error',
                    text: 'New Passwords do not match!',
                    type: 'error',
                    timer: 2000,
                    showConfirmButton: false
                });
            } else {

                swal({
                    title: 'Change Password',
                    text: 'Are you sure?',
                    type: 'question',
                    confirmButtonText: 'Yes',
                    showCancelButton: true,
                    cancelButtonText: 'No'
                }).then(function () {

                    $.post(location.pathname, {
                        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        context: 'changePassword',
                        old_password: $('#oldPassword').val(),
                        new_password: $('#newPassword').val(),
                        new_password_confirm: $('#newPasswordConfirm').val(),
                    }, function (data) {
                        // debugger;
                        if(data.success == "true"){
                            swal({
                                title: 'Success!',
                                text: 'Your password has been changed',
                                type: 'success',
                                timer: 2000,
                                showConfirmButton: false
                            });

                            setTimeout(function(){
                                location.reload();
                            },2000);
                        }else{
                         swal({
                                title: 'Error',
                                text: 'Old Password does not match!',
                                type: 'error',
                                timer: 2000,
                                showConfirmButton: false
                            });   
                        }
                        
                    });

            });

            }
        return false;

        });
        $('.close-staging-banner').click(function(){
        debugger
        $(this).parent().parent().remove();
        $("#container").removeAttr("style")
        $("#container").css("margin-top","-20px")
        $(".header").removeAttr("style")
    })
    </script>

    {% endblock other_scripts %}

</body>

</html>