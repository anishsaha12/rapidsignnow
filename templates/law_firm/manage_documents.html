{% extends 'law_firm/base.html' %}

{% load staticfiles %}

{% block theme_styles %}
<link href="{% static 'theme/bs3/css/bootstrap.min.css' %}" rel="stylesheet">
<link href="{% static 'theme/css/bootstrap-reset.css' %}" rel="stylesheet">
<link href="{% static 'theme/font-awesome/css/font-awesome.css' %}" rel="stylesheet" />

<!-- Custom styles for this template -->
<link href="{% static 'theme/css/style.css' %}" rel="stylesheet">
<link href="{% static 'theme/css/style-responsive.css' %}" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'law_firm/css/style.css' %}">

{% endblock theme_styles %}

{% block other_styles %}
<style>
        /* .panel-body{
            display: none;
        } */
        .btn-file {
        position: relative;
        overflow: hidden;
    }
    .btn-file input[type=file] {
        position: absolute;
        top: 0;
        left: 0;
        min-width: 100%;
        min-height: 100%;
        /* font-size: 100px; */
        text-align: right;
        filter: alpha(opacity=0);
        opacity: 0;
        outline: none;
        background: white;
        cursor: inherit;
        display: block;
    }
   .add-file{
        background: #DDDADA;
        height: 35px;
    width: max-content;
   }
    #upload-button{
        display: flex;
    align-items: center;
    justify-content: center;
    margin-left: auto;
    width: 100%;

    }
    </style>
{% endblock other_styles %}

{% load range_filter %}


{% block content %}

<div id="documents">
                        {% if documents_count == 0 %}

                        <span style="align-items: center;
                        display: flex;
                        justify-content: center;margin-top:250px;"><h3>No Documents</h3></span>
                        {% else %}
                        {% for document in documents %}
                        <div class="col-md-4">
                        <section class="panel case-card">
                                {% csrf_token %}
                            <header class="panel-heading">
                                {{ document.file_name }}
                                <span class="tools pull-right">
                                    <a href="javascript:;" class="fa fa-chevron-down" style="pointer-events: none;"></a>
                                 </span>
                            </header>
                            <div class="panel-body">
                                    <div class="form-group">
                                            {{ document.file_name }} 
                                            
                                            <br><br>
                                            <button style="margin-left:5px;margin-bottom: 5px;"class="btn btn-primary btn-sm document-print" target="_blank" type="button" document-id="{{ document.pk }}"aria-expanded="false"><i class="fa fa-external-link" aria-hidden="true"></i></button><button class="btn btn-clear btn-sm download-document" type="button" style="margin-left:10px;background: lightgray;    margin-top: -5px;" href="#" document-id="{{ document.pk }}"><i class="fa fa-download" aria-hidden="true"></i></button>
                            </div>
                            </div>
                        </section>
                    </div>
                    {% endfor %}
                    {% endif %}
    </div>
    
<!-- <div class="col-lg-12">
        <section class="panel">
            <header class="panel-heading">
                Upload New Document
                <span class="tools pull-right">
                        <a href="javascript:;" class="fa fa-chevron-down" style="pointer-events: none;"></a>
                     </span>
            </header>
            <div class="panel-body upload">
                    <form id="upload-document" enctype="multipart/form-data">
                                <div class="form-group">
                                        <div class="col-xs-6 col-sm-3 control-label col-lg-3">Upload </div>
                                            <div class="col-xs-6 col-lg-6 files">
                                                    <div class="button-container">
                                                    </div>
                                            </div>
                                </div>

                                <div class="form-group">
                                        <div class="col-lg-offset-3 col-lg-10" id="upload-button">
                                            <button id="upload-document" class="btn btn-success" >Upload</button>
                                        
                                        </div>
                                    </div>
                            </form>
                        </div>
    
                        {% csrf_token %}
                
        </section>
    </div> -->
    
{% endblock content %}


{% block theme_scripts %}
<script src="{% static 'theme/js/jquery.js' %}"></script>
<script src="{% static 'theme/bs3/js/bootstrap.min.js' %}"></script>
<script src="{% static 'theme/js/jquery.dcjqaccordion.2.7.js' %}" class="include"></script>
<script src="{% static 'theme/js/jquery.scrollTo.min.js' %}"></script>
<script src="{% static 'theme/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.js' %}"></script>
<script src="{% static 'theme/js/jquery.nicescroll.js' %}"></script>
<script src="{% static 'theme/js/iCheck/jquery.icheck.js' %}"></script>
<script src="{% static 'theme/js/jquery.validate.min.js' %}"></script>


<!--common script init for all pages-->
<script src="{% static 'theme/js/scripts.js' %}"></script>

{% endblock theme_scripts %}

{% block other_scripts %}

<script>
    
     jQuery(document).ready(function () {
        $(".panel-body:first").css( "display", "block" )
        $(".upload").css( "display", "block" )
        // $(".tools:first > a").attr("class", "fa fa-chevron-down");
        $('a[data-nav-item=manage-documents]').addClass('active');
    });
    $('#navigation-button').remove();
 
    $('.download-document').click(function () {
        //  debugger
        var document_id = $(this).attr('document-id');
        $('<form action="." method="POST"></form>')
            .append($('<input>', {
                'name': 'csrfmiddlewaretoken',
                'value': $('input[name=csrfmiddlewaretoken]').val(),
                'type': 'hidden'
            }))
            .append($('<input>', {
                'name': 'context',
                'value':  'download-document',
                'type': 'hidden'
            })).append($('<input>', {
                'name': 'document-id',
                'value': document_id,
                'type': 'hidden'
            })).appendTo('body').submit();
     })
     $('.document-print').click(function(event){
        //  event.preventDefault()
        var document_id = $(this).attr('document-id');
        $('<form action="." method="POST" target="_blank"></form>')
            .append($('<input>', {
                'name': 'csrfmiddlewaretoken',
                'value': $('input[name=csrfmiddlewaretoken]').val(),
                'type': 'hidden'
            }))
            .append($('<input>', {
                'name': 'context',
                'value':  'view-document',
                'type': 'hidden'
            })).append($('<input>', {
                'name': 'document-id',
                'value': document_id,
                'type': 'hidden'
            })).appendTo('body').submit();
     })
</script>
{% endblock other_scripts %}